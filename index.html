
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="format-detection"content="telephone=no">
<title>王者农药·台词大考验</title>
<script type="text/javascript">
/*
    function is_weixn(){
    var ua = navigator.userAgent.toLowerCase();
    if(ua.match(/MicroMessenger/i)=='micromessenger') {
      console.log('是微信环境');
    } else if (ua.match(/WeiBo/i) == "weibo") {
       console.log('在新浪微博客户端打开');  
    } else {
      window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2d47cd8ea102b435&redirect_uri=https%3a%2f%2fwww.h5anli.com%2fh5%2f2017%2fala%2fsuning%2fsrouter%2findex.html&response_type=code&scope=SCOPE&state=STATE#wechat_redirect';
    }
  }
  is_weixn();
  */
</script>
<link href="css/main.css" type="text/css" rel="stylesheet" />
<!--script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script-->

</head>

<body>
<script type="text/javascript">
    var _w=document.body.clientWidth || document.documentElement.clientWidth;
    var _h=document.body.clientHeight || document.documentElement.clientHeight;  
</script>




<!--loading页 loading中的图片，尽量使用<img />标签插入-->
<div class="container">

    <div class="loadpage" id="loadpage" style="width:100%;height:100%;">


        <div class="loading">

            <div class="loadbg">
                <img class="loadinggif" src="images/123.gif" alt="">
                
                <div class="loadprocess">
                </div>
            </div>
            
        </div>
    </div>

    

    <div class="main" id="main">
        
        <div class="page page1">
            <div class="paper"></div>
            <div class="hero1"></div>
            <div class="hero hero2"></div>
            <div class="hero hero3"></div>
            <div class="hero hero4"></div>
            <div class="hero hero5"></div>
            <div id="startBtn" class="btn"></div>
        </div>

        <div class="rules">
            <div class="button goon pulse"></div>
        </div>
        
        <div class="page page2">
            <div class="hero hero3"></div>
            <div class="title"></div>
            <div class="testprs testprs1"></div>
            <div class="light lightFlash"></div>
            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>

            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>

            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>

            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>

            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>

            <div class="test">
                <div class="num"></div>
                <div class="text"></div>
                <div class="repeat"></div>
                <div class="option option1"><div class="result"></div><div class="name"></div></div>
                <div class="option option2"><div class="result"></div><div class="name"></div></div>
                <div class="option option3"><div class="result"></div><div class="name"></div></div>
                <div class="option option4"><div class="result"></div><div class="name"></div></div>
            </div>
        </div>

        <div class="page page3">
            
            <div class="last">
                
            </div>
            <div class="coupon"></div>
            <div class="lastHero"></div>
            <div class="button replayBtn"></div>
            <div class="button shareBtn"></div>
            <img class="saveImg" src="" alt="">

        </div>


        <div class="shareDiv"></div>
        <div class="resultCover"></div>

        <div class="prize">
            <div class="prizeText"></div>
            <div class="omingwen"></div>
            <div class="mingwen mingwen1"></div>
            <div class="mingwen mingwen2"></div>
            <div class="mingwen mingwen3"></div>
            <div class="mingwen mingwen4"></div>
            <div class="mingwen mingwen5"></div>
            <div class="closeBtn"></div>
            <div class="button reprizeBtn"></div>
            <div class="button prizeBtn"></div>
            <div class="button prizemore"></div>
            <div class="shiwuBtn"></div>
        </div>
        
        


    </div>
</div>

<!--旋屏提示 start-->
<div id="orientLayer" class="mod-orient-layer">
    <div class="mod-orient-layer__content">
        <i class="icon mod-orient-layer__icon-orient"></i>
        <div class="mod-orient-layer__desc">为了更好的体验，请使用竖屏浏览</div>
    </div>
</div>
<!-- 音乐 start-->
<div class="musicinfo roate" id="musicinfo">
    <img class="music musicOn" src="images/musicBtn.png" alt="">
</div>
<!-- 音乐 end-->

<audio id="bgm" loop src="audio/music.mp3"></audio>
<audio id="welcome" src="audio/welcome.mp3"></audio>

<audio class="heroAudio" id="hero1" src="audio/hero-1.mp3"></audio>
<audio class="heroAudio" id="hero2" src="audio/hero-2.mp3"></audio>
<audio class="heroAudio" id="hero3" src="audio/hero-3.mp3"></audio>
<audio class="heroAudio" id="hero4" src="audio/hero-4.mp3"></audio>
<audio class="heroAudio" id="hero5" src="audio/hero-5.mp3"></audio>
<audio class="heroAudio" id="hero6" src="audio/hero-6.mp3"></audio>
<!--旋屏提示 end-->

<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/imagesLoader.min.js"></script>
<script type="text/javascript" src="js/howler.min.js"></script>
<script type="text/javascript" src="js/jscript.js"></script>


<script>

$('#loadpage').css({'width':_w+'px','height':_h+'px'});
$('#main').css({'width':_w+'px','height':_h+'px'});


var thisUrl = 'http://172.16.97.58/';
// var thisUrl = 'https://www.h5anli.com/h5/2017/ala/';

// var shareUrl = 'http://172.16.97.58/dblife/index.html';
var shareUrl = 'https://www.h5anli.com/h5/2017/ala/suning/srouter/index.html';



var bgm = document.getElementById('bgm');

function audioAutoPlay(id){  
    var audio = document.getElementById(id);  
    audio.play();  
    document.addEventListener("WeixinJSBridgeReady", function () {  
        audio.play();  
    }, false);
}
function musicStop(id){
    var audio = document.getElementById(id);
    audio.play();
    document.addEventListener("WeixinJSBridgeReady", function () {  
        audio.play(); 
    }, false);
    setTimeout(function(){
        audio.pause(); 
    },300);
}  
audioAutoPlay('bgm');


welcome = new Howl({
    src: ['audio/welcome.mp3'],
    loop: false
});

welcome.play();
welcome.stop();


prizeBgm = new Howl({
    src: ['audio/prize.mp3'],
    loop: false
});

prizeBgm.play();
prizeBgm.stop();

//禁止页面拖动
// document.addEventListener('touchmove', function(e) {
//     e.preventDefault();
// }, false);



document.addEventListener('touchmove', function(e){e.preventDefault()}, false);

// var soundmusic = new Howl({
//     src: ['audio/music.mp3'],
//     loop: true
// });

// soundmusic.play();
// soundmusic.fade(0, 0.8, 1000);   

// 图片预加载
//view-source:https://www.h5anli.com/h5/2017/ala/suning/srouter/index.html
var loader=new ImagesLoader();
loader.loadImages([

    'loading.gif',
    'bg.jpg',
    'testbg.jpg',
    'coupon1.png',
    'coupon2.png',
    'coupon3.png',
    'hero-1.png',
    'hero-2.png',
    'hero-3.png',
    'hero-4.png',
    'hero-5.png',
    'hero-6.png',
    'hero-7.png',
    'hero-8.png',
    'hero-9.png',
    'hero-10.png',
    'hero-11.png',
    'hero-12.png',
    'hero-13.png',
    'hero-14.png',
    'hero-15.png',
    'hero-16.png',
    'hero-17.png',
    'hero-18.png',
    'hero-19.png',
    'hero-20.png',
    'hero-21.png',
    'hero-22.png',
    'hero-23.png',
    'hero-24.png',
    'hero-25.png',
    'musicBtn.png',
    'name-1.png',
    'name-2.png',
    'name-3.png',
    'name-4.png',
    'name-5.png',
    'name-6.png',
    'name-7.png',
    'name-8.png',
    'name-9.png',
    'name-10.png',
    'name-11.png',
    'name-12.png',
    'name-13.png',
    'name-14.png',
    'name-15.png',
    'name-16.png',
    'name-17.png',
    'name-18.png',
    'name-19.png',
    'name-20.png',
    'name-21.png',
    'name-22.png',
    'name-23.png',
    'name-24.png',
    'name-25.png',
    'num-1.png',
    'num-2.png',
    'num-3.png',
    'num-4.png',
    'num-5.png',
    'num-6.png',
    'p1-1.png',
    'p1-2.png',
    'p1-3.png',
    'p1-4.png',
    'p1-5.png',
    'p1-6.png',
    'p1-7.png',
    'p2-1.png',
    'p2-2.png',
    'p2-3.png',
    'p2-4.png',
    'p2-5.png',
    'p2-6.png',
    'p2-7.png',
    'pixels.png',
    'repeat.png',
    'replayBtn.png',
    'result-0.png',
    'result-1.png',
    'result-2.png',
    'result-3.png',
    'result-4.png',
    'result-5.png',
    'result-6.png',
    'shareBtn.png',
    'shareDiv.png',
    'testprs-1.png',
    'testprs-2.png',
    'testprs-3.png',
    'testprs-4.png',
    'testprs-5.png',
    'testprs-6.png',
    'text-1.png',
    'text-2.png',
    'text-3.png',
    'text-4.png',
    'text-5.png',
    'text-6.png',
    'text-7.png',
    'text-8.png',
    'text-9.png',
    'text-10.png',
    'text-11.png',
    'text-12.png',
    'text-13.png',
    'text-14.png',
    'text-15.png',
    'text-16.png',
    'text-17.png',
    'text-18.png',
    'text-19.png',
    'text-20.png',
    'text-21.png',
    'text-22.png',
    'text-23.png',
    'text-24.png',
    'text-25.png',
    'thumb.png',
    'saveImg-1.jpg',
    'saveImg-2.jpg',
    'saveImg-3.jpg',
    'saveImg-4.jpg',
    'saveImg-5.jpg',
    'saveImg-6.jpg',
    'saveImg-0.jpg',
    'shiwubtn.png',
    'prizemore.png',
    'closeBtn.png',
    'prizebg.png',
    'prizeText.png',
    'prizeText-1.png',
    'prizeText-2.png',
    'prizeText-3.png',
    'prizeText-4.png',
    'prize-1.png',
    'prize-2.png',
    'prize-3.png',
    'prize-4.png',
    'prize-5.png',
    'prize-x.png',
    'prize-0.png',
    'reprizeBtn.png',
    'prizeBtn.png',

],'images/');

loader.complete(function(){
  console.log('completed');
  
  // setTimeout(function(){

    $('#loadpage').fadeOut(500);
    $('#main').fadeIn(1000); 
    $('.page1 .btn').fadeIn(1000).addClass("pulse");
    $('.page1 .paper').fadeIn(500);
    $('.page1 .hero2').addClass("bounceInLeftBottom animated1");
    $('.page1 .hero3').addClass("bounceInUp animated1");
    $('.page1 .hero4').addClass("bounceInLeft animated1");
    $('.page1 .hero5').addClass("bounceInRightBottom animated1");
    $('.page1 .hero1').addClass("fadeInDown animated1");




    // setTimeout(function(){
    //     $('.page2 .hero3').addClass("fadeInUp animated1");
    //     $('.page2 .light').addClass("bounceInDown animated1");
    //     $('.test').eq(0).fadeIn(500);
    //     $('.test .text').eq(0).fadeIn(1000);
    //     $('.test .num').eq(0).fadeIn(1000);
    //     heroAudio[0].play();
    //     heroAudio[0].fade(0.8, 1, 1000);
    // },3000);
  //   $(".loadprocess").fadeOut(500);
  // },2000);
  
  
});

loader.process(function(){

  var prsnum = this.processNum;
  $('.loadprocess').html(prsnum+"%");
  console.log('process'+prsnum);

});

loader.start();


$(window).resize(function () {          //当浏览器大小变化时
    console.log("浏览器时下窗口可视区域高度:"+$(window).height());          //浏览器时下窗口可视区域高度
    console.log("浏览器时下窗口文档的高度:"+$(document).height());        //浏览器时下窗口文档的高度
    console.log("浏览器时下窗口文档body的高度:"+$(document.body).height());   //浏览器时下窗口文档body的高度
    console.log("浏览器时下窗口文档body的总高度:"+$(document.body).outerHeight(true)); //浏览器时下窗口文档body的总高度 包括border padding margin
});


/************************* 微信分享功能 ********************************/     
    var sharethis=function(){
    var server = 'https://www.h5anli.com/h5share.php/Home/Index/JDOU_shareWx/';
    // var server = 'https://www.h5anli.com/h5share.php/Home/Share/JDOU_shareWx_niu/';
    // var server = 'https://www.h5anli.com/h5share.php/Home/Shareworld/JDOU_shareWx_niu/';  
   

    var currenturl = window.location.href;
     var postData={ url:currenturl}
          $.ajax({
                type: "POST",
                url: server,
                data: postData,
                async: true,
                dataType: "json",
                success: function (result) {
                        //分享功能
                        wx.config({
                            debug: false,
                            appId: result.appId,
                            timestamp: result.timestamp,
                            nonceStr: result.nonceStr,
                            signature: result.signature,
                            jsApiList: [
                                'checkJsApi',
                                'onMenuShareTimeline',
                                'onMenuShareAppMessage',
                                'onMenuShareQQ',
                                'onMenuShareWeibo'
                            ]
                        });
                        wechatReady();
                },
                error: function () {
                  //window.alert("系统错误，请稍后再试");
                }
            });
    
    }
    
      var shareDesc = '猜猜这是哪个英雄的台词...';
      var titleList = ['征服了男人也就征服了世界','服从我，满足我，最后成为我的一部分','完美的皮肤来自鲜血的沐浴','整容术都是骗人的，青春美貌全靠把你吸干','我的调教是不是别有乐趣','嗯...你很可口'];
      
      var randomNum = Math.floor(Math.random()*25+1);
      var imgUrl = 'https://www.h5anli.com/h5/2017/ala/suning/srouter/images/hero-'+randomNum+'.png';
      var ranTitle = Math.floor(Math.random()*6);
      var shareTitle = titleList[ranTitle];
      
      function wechatReady() {     
            wx.ready(function () {

                var appMessageShareData = {
                    title:shareTitle,
                    desc: shareDesc,
                    link: shareUrl,
                    // imgUrl:'https://www.h5anli.com/h5/2017/ala/suning/router1105/images/hero-'+Math.floor(Math.random()*25+1)+'.png'
                    imgUrl:imgUrl
                 };      
                 wx.onMenuShareAppMessage(appMessageShareData);
                 wx.onMenuShareTimeline(appMessageShareData);
                 wx.onMenuShareQQ(appMessageShareData);
                 wx.onMenuShareWeibo(appMessageShareData);
            })     
            wx.error(function (res) {
                 // alert(res.errMsg);
            });
        }
sharethis();
</script>
</body>
</html>